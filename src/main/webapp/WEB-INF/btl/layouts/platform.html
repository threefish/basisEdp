<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="${title!}">
    <title>${title!}</title>
    <%include("/inc/header.html"){}%>
    <script>
        if (!String.prototype.endsWith) {
            String.prototype.endsWith = function (searchString, position) {
                var subjectString = this.toString();
                if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {
                    position = subjectString.length;
                }
                position -= searchString.length;
                var lastIndex = subjectString.lastIndexOf(searchString, position);
                return lastIndex !== -1 && lastIndex === position;
            };
        }
    </script>
</head>
<body class="hold-transition skin-blue sidebar-mini ${layBoxed!}"> <!--layout-boxed 添加该属性改为盒子布局-->
<div class="wrapper">
    <header class="main-header">
        <a href="${base!}/main/index" class="logo">
            <span class="logo-mini">${i18n.productNameMiNi}</span>
            <span class="logo-lg">${i18n.productName}</span>
        </a>
        <nav class="navbar navbar-static-top" role="navigation">
            <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
                <span class="sr-only">Toggle navigation</span>
            </a>
            <div class="navbar-custom-menu">
                <ul class="nav navbar-nav">
                    <li class="dropdown messages-menu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-envelope-o"></i>
                            <span class="label label-success">4</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="header">您有4条未读消息</li>
                            <li>
                                <ul class="menu">
                                    <li>
                                        <a href="#">
                                            <div class="pull-left">
                                                <img src="${base!}/static/img/user2-160x160.jpg" class="img-circle"
                                                     alt="User Image">
                                            </div>
                                            <h4>
                                                ${session.me.userName!}
                                                <small><i class="fa fa-clock-o"></i> 5 mins</small>
                                            </h4>
                                            <p>Why not buy a new awesome theme?</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li class="footer"><a href="#">查看全部消息</a></li>
                        </ul>
                    </li>
                    <li class="dropdown notifications-menu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-bell-o"></i>
                            <span class="label label-warning">10</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="header">您有10条未读通知</li>
                            <li>
                                <ul class="menu">
                                    <li>
                                        <a href="#">
                                            <i class="fa fa-users text-aqua"></i> 5 new members joined today
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li class="footer"><a href="#">查看全部</a></li>
                        </ul>
                    </li>
                    <li class="dropdown tasks-menu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-flag-o"></i>
                            <span class="label label-danger">9</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="header">您有9个任务</li>
                            <li>
                                <ul class="menu">
                                    <li>
                                        <a href="#">
                                            <h3>
                                                设计按钮
                                                <small class="pull-right">20%</small>
                                            </h3>
                                            <div class="progress xs">
                                                <div class="progress-bar progress-bar-aqua" style="width: 20%"
                                                     role="progressbar" aria-valuenow="20" aria-valuemin="0"
                                                     aria-valuemax="100">
                                                    <span class="sr-only">20% 完成</span>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li class="footer">
                                <a href="#">查看全部任务</a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <span class="ng-flag ${lang}"></span>
                        </a>
                        <ul class="dropdown-menu lang">
                            <li data="en_US"><span class="pull-left ng-flag en_US"></span><a
                                    style="color: #666666;display: inline">English</a></li>
                            <li data="zh_CN"><span class="pull-left ng-flag zh_CN"></span><a
                                    style="color: #666666;display: inline">中文简体</a></li>
                        </ul>
                    </li>
                    <li class="dropdown user user-menu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <img src="${base!}/static/img/user2-160x160.jpg" class="user-image" alt="User Image">
                            <span class="hidden-xs">${session.me.userName!}</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="user-header">
                                <img src="${base!}/static/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                                <p>
                                    ${session.me.userName!} - Web Developer
                                    <small>Member since Nov. 2012</small>
                                </p>
                            </li>
                            <li class="user-body">
                                <div class="row">
                                    <div class="col-xs-4 text-center">
                                        <a href="#">Followers</a>
                                    </div>
                                    <div class="col-xs-4 text-center">
                                        <a href="#">Sales</a>
                                    </div>
                                    <div class="col-xs-4 text-center">
                                        <a href="#">Friends</a>
                                    </div>
                                </div>
                            </li>
                            <li class="user-footer">
                                <div class="pull-left">
                                    <%if(so.hasPermission("main.index:logout")){%>
                                    <a href="#" class="btn btn-default btn-flat">${i18n.userProfile}</a>
                                    <%}%>
                                </div>
                                <div class="pull-right">
                                    <a href="${base!}/account/logout" class="btn btn-default btn-flat">${i18n.userLoginOut}</a>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" data-toggle="control-sidebar"><i class="fa fa-gears"></i></a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <aside class="main-sidebar">
        <section class="sidebar">
            <div class="user-panel">
                <div class="pull-left image">
                    <img src="${base!}/static/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                </div>
                <div class="pull-left info">
                    <p> ${session.me.userName!}</p>
                    <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
                </div>
            </div>
            <form action="#" method="get" class="sidebar-form">
                <div class="input-group">
                    <input type="text" name="q" class="form-control" placeholder="Search...">
                    <span class="input-group-btn">
                <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i>
                </button>
              </span>
                </div>
            </form>
            <%include("/inc/menu.html"){}%>
        </section>
    </aside>
    <div class="content-wrapper" id="container">
        ${layoutContent}
    </div>
    <footer class="main-footer">
        <div class="pull-right hidden-xs">
            ${i18n.productUrl}
        </div>
        <strong>Copyright &copy; 2016 <a target="_blank" href="//${i18n.productUrl}">Company</a>.</strong> All rights
        reserved.
    </footer>
    <aside class="control-sidebar control-sidebar-dark">
        <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
            <li class="active"><a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa fa-gears"></i></a>
            </li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="control-sidebar-settings-tab">
                <form method="post">
                    <h3 class="control-sidebar-heading">${i18n.GeneralSettings}</h3>
                    <div class="form-group">
                        <label class="control-sidebar-subheading">
                            <input type="checkbox" name="layBoxed" class="pull-right flat-red"> 盒式布局
                        </label>
                        <p>
                            左右会留有一定空白区域
                        </p>
                    </div>
                </form>
            </div>
        </div>
    </aside>
    <div class="control-sidebar-bg"></div>
</div>
</body>
<script type="text/javascript">
    $(function () {
        $('.lang li').click(function () {
            var lang = $(this).attr("data");
            setCookie("lang", lang);
            window.location.reload();
        });
        SMValidator.setSkin('bootstrap');
        var lang = getCookie("lang");
        var layBoxEl = $("#control-sidebar-settings-tab input[name='layBoxed']");
        var layBoxed = getCookie("layBoxed");
        if (layBoxed) {
            layBoxEl.attr("checked", true);
        } else {
            $("body").addClass("fixed");
        }
        layBoxEl.iCheck({
            checkboxClass: 'icheckbox_flat-green',
            radioClass: 'iradio_flat-green'
        });
        layBoxEl.on('ifChecked', renderBoxed);
        layBoxEl.on('ifUnchecked', renderBoxed);
        function renderBoxed(e) {
            if (e.type == "ifChecked") {
                setCookie("layBoxed", "true");
            } else {
                delCookie("layBoxed");
            }
            window.location.reload();
        }

        var menuHasActive = $(".sidebar-menu li[class='active']");
        if (menuHasActive.length == 0) {
            var pathname = window.location.pathname;
            $(".sidebar-menu li").each(function () {
                var that = $(this);
                var _a = that.find("a");
                if ((_a.attr("href") + "").endsWith(pathname)) {
                    that.addClass("active");
                    that.parents("li").addClass("active");
                }
            });
        };
    });
</script>
</html>
